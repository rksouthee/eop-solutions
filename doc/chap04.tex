\chapter{Linear Orderings}

\begin{exercise}
	Give an example of a relation that is neither strict nor reflexive.
\end{exercise}

\begin{solution}
	The equality of IEEE floating-point numbers is neither strict nor reflexive. To show this, we first
	demonstrate that the relation is not strict; if we compare a well defined value, such as 0, then
	the strict property will not hold since \verb|(!(0 == 0)) == false|. Second, we need to show that
	the relation is irreflexive, we can do this if we compare \verb|NAN| for equality with itself, then
	\verb|(NAN == NAN) == false|.
\end{solution}

\begin{exercise}
	Give an example of a symmetric relation that is not transitive.
\end{exercise}

\begin{solution}
	An example of a symmetric relation that is not transitive is "friend".
\end{solution}

\begin{exercise}
	Give an example of a symmetric relation that is not reflexive.
\end{exercise}

\begin{lemma}
	If $r$ is an equivalence relation, $a = b \Rightarrow r(a, b)$.
\end{lemma}

\begin{proof}
	Since $r$ is an equivalence relation, we can substitute $a$ for $b$, and
	because of the transitive property, we have $r(a, a) = r(a, b)$.
\end{proof}

\begin{lemma}
	$\func{key\_function}(f, r) \Rightarrow \func{equivalence}(r)$
\end{lemma}

\begin{proof}
	We need to show that the \verb|key_function| satisfies the necessary properties
	of an equivalence relation on $r$.
	\begin{align*}
		r(a, b) \wedge r(b, c) \Rightarrow r(a, c)
		&\Leftrightarrow f(a) = f(b) \wedge f(b) = f(c) \Rightarrow f(a) = f(c)\\
		r(a, a)
		&\Leftrightarrow f(a) = f(a)\\
		r(a, b) \Rightarrow r(b, a)
		&\Leftrightarrow f(a) = f(b) \Rightarrow f(b) = f(a)
	\end{align*}
	These are all satisfied because equality is an equivalence relation.
\end{proof}

\begin{lemma}
	The symmetric complement of a weak ordering is an equivalence relation.
\end{lemma}

\begin{lemma}
	A total ordering is a weak ordering.
\end{lemma}

\begin{proof}
	Equality is an equivalence relation.
\end{proof}

\begin{lemma}
	A weak ordering is asymmetric.
\end{lemma}

\begin{lemma}
	Given a weak ordering $r$, then by the weak-trichotomy law
	$r(a, b) \Rightarrow \lnot r(a, b)$.
\end{lemma}

\begin{lemma}
	A weak ordering is strict.
\end{lemma}

\begin{exercise}
	Implement \verb|select_2_4|.
\end{exercise}

\lstinputlisting[language=c++, firstline=781, lastline=809]{eop-code/eop.h}

\begin{lemma}
	\verb|select_2_5| performs six comparisons.
\end{lemma}

\begin{proof}
	There is one comparison for each of the functions in the call stack for a
	total of six comparisons.
	\begin{itemize}
		\item \verb|select_2_5|
		\item \verb|select_2_5_ab|
		\item \verb|select_2_5_ab_cd|
		\item \verb|select_1_4_ab|
		\item \verb|select_1_4_ab_cd|
		\item \verb|select_0_2|
	\end{itemize}
\end{proof}

\begin{exercise}
	Find an algorithm for median of 5 that does slightly fewer comparisons
	on average.
\end{exercise}

\begin{exercise}
	Prove the stability of every order-selection procedure in this
	section.
\end{exercise}

\begin{exercise}
	Verify the correctness and stability of every order-selection
	procedure in this section by exhaustive testing.
\end{exercise}

\begin{project}
	Design a set of necessary and sufficient conditions preserving
	stability under composition of order-selection procedures.
\end{project}

\begin{project}
	Create a library of minimum-comparison procedures for stable
	sorting and merging. Minimize not only the number of comparisons
	but also the number of data movements.
\end{project}

\begin{exercise}
	Rewrite the algorithms in this chapter using three-valued
	comparison.
\end{exercise}
