\chapter{Ordered Algebraic Structures}

\begin{lemma}
	An identity element is unique:
	\[ \func{identity\_element}(e, op) \wedge \func{identity\_element}(e', op) \Rightarrow e = e' \]
\end{lemma}

\begin{proof}
	\begin{align*}
		e &= op(e, e')\\
		  &= e'
	\end{align*}
\end{proof}

\begin{lemma}
	$n^3$ is the multiplicative inverse modulo 5 of a positive integer $n \neq 0$.
\end{lemma}

\begin{proof}
	Using Fermat's Little Theorem which states that if $p$ is prime, then for any integer $n$
	\[ n^p \equiv n\ (\textrm{mod}\ p). \]
	In our case $p = 5$, and since $n \neq 0$ we have
	\begin{align*}
		n^5 &\equiv n\ (\textrm{mod}\ 5)\\
		n^4 &\equiv 1\ (\textrm{mod}\ 5)\\
		nn^3 &\equiv 1\ (\textrm{mod}\ 5)
	\end{align*}
\end{proof}

\begin{lemma}
	In an additive group, $-0 = 0$.
\end{lemma}

\begin{proof}
	\begin{align*}
		0 &= 0 + (-0) && \text{inverse operation}\\
		  &= (-0) + 0 && \text{commutativity}\\
		  &= -0       && \text{additive identitiy}
	\end{align*}
\end{proof}

\begin{lemma}
	Every additive group is a module over integers with an appropriately
	define scalar multiplication.
\end{lemma}

\begin{proof}
	Use Theorem 5.1.
\end{proof}

\begin{lemma}
	In an ordered additive semigroup, $a < b \wedge c < d \Rightarrow a + c < b + d$.
\end{lemma}

\begin{proof}
	Given $a < b$, then from the definition of ordered additive semigroup we have:
	\[ a < b \Rightarrow a + c < b + c, \]
	and similarly for $c < d$
	\[ c < d \Rightarrow c + b < d + b. \]

	\begin{align*}
		a + c < b + c = c + b < d + b && \text{commutativity}\\
		a + c < b + c < b + d && \text{commutativity}\\
		a + c < b + d && \text{transitivity}
	\end{align*}
\end{proof}

\begin{lemma}
	In an ordered additive monoid viewed as a semimodule over natural numbers,
	$a > 0 \wedge n > 0 \Rightarrow na > 0$.
\end{lemma}

\begin{proof}
	\begin{align*}
		na &= a + (n - 1)a && n > 0\\
		   &> 0 && a > 0
	\end{align*}
\end{proof}

\begin{lemma}
	In an ordered additive group, $a < b \Rightarrow -b < -a$.
\end{lemma}

\begin{proof}
	\begin{align*}
		a < b &\Rightarrow a - a - b < b - a - b\\
		&\Rightarrow 0 - b < 0 - a\\
		&\Rightarrow -b < -a
	\end{align*}
\end{proof}

\begin{lemma}
	In an ordered additive group, $a < 0 \Rightarrow 0 < -a$.
\end{lemma}

\begin{proof}
	\begin{align*}
		a < 0 &\Rightarrow a + (-a) < 0 + (-a)\\
		&\Rightarrow a - a < 0 - a\\
		&\Rightarrow 0 < -a
	\end{align*}
\end{proof}

\begin{lemma}
	\begin{align*}
		|a - b| &= |b - a|\\
		|a + b| &\leq |a| + |b|\\
		|a - b| &\geq |a| - |b|\\
		|a| = 0 &\Rightarrow a = 0\\
		a \neq 0 &\Rightarrow |a| > 0
	\end{align*}
\end{lemma}

\begin{exercise}
	Give an example of two polynomials with integer coefficients for which
	the algorithm does not terminate.
\end{exercise}

\begin{solution}
	Let $a = x$ and $b = 1$.
\end{solution}

\begin{lemma}
	The following are Archimedean monoids: integers, rational numbers, binary fractions
	$\left\{\frac{n}{2^k}\right\}$, ternary fractions $\left\{\frac{n}{3^k}\right\}$, and
	real numbers.
\end{lemma}

\begin{exercise}
	Analyze the complexity of \verb|remainder_nonnegative|.
\end{exercise}

\begin{lemma}
	The result of doubling a positive element of a halvable monoid $k$ times may be
	halved $k$ times.
\end{lemma}

\begin{proof}
	We'll first show that doubling a number $k$ times is equal to $2^ka = 2^{k-1}a + 2^{k-1}a$.
	Using induction, we'll first prove the base case when $k = 1$.
	\begin{align*}
		2^1a &= 2^0a + 2^0a\\
		     &= 1a + 1a\\
		     &= a + a.
	\end{align*}
	Assume that $n=k$ holds, show $n = k + 1$
	\begin{align*}
		2^{k+1}a &= 2(2^ka)\\
			 &= 2(2^{k-1}a + 2^{k-1}a)\\
			 &= 2^ka + 2^ka.
	\end{align*}
	Now we want to show that we can halve $2^ka$ $k$ times. Using the definition of halvable
	monoid we have
	\begin{align*}
		\func{half}(2^ka) &= \func{half}(2^{k-1}a + 2^{k-1}a)\\
		&= 2^{k-1}a,
	\end{align*}
	until we have $k=1$ where we have
	\begin{align*}
		\func{half}(2a) &= \func{half}(a + a)\\
		&= a.
	\end{align*}
	We can see that doubling a positive element $k$ times may then be halved $k$ times.
\end{proof}

\begin{project}
	Are there useful models of Archimedean monoids that are not halvable monoids?
\end{project}

\begin{lemma}
	In an Archimedean monoid $T$ with positive $x, a, b$:
	\begin{itemize}
		\item $b \text{ divides } a \Leftrightarrow \func{remainder\_nonnegative}(a, b) = 0$
		\item $b \text{ divides } a \Rightarrow b \leq a$
		\item $a > b \wedge x \text{ divides } a \wedge x \text{ divides } b \Rightarrow x \text{ divides } (a - b)$
		\item $x \text{ divides } a \wedge x \text{ divides } b \Rightarrow x \text{ divides } \func{remainder\_nonnegative}(a, b)$
	\end{itemize}
\end{lemma}

\begin{proof}
	Let $a = nx$ and $b = mx$, then
	\begin{align*}
		a - b &= nx - mx\\
		      &= (n - m)x,
	\end{align*}
	and since $a > b$, then $n > m$ and $x \text{ divides } (a - b)$.

	Let $a = nx$, $b = mx$ and $a = qb + r$ where $r = \func{remainder\_nonnegative}(a, b)$ then
	\begin{align*}
		a &= qb + r\\
		nx &= q(mx) + r\\
		(n - qm)x &= r,
	\end{align*}
	that is, $x \text{ divides } r$.
\end{proof}

\begin{lemma}
	In an Archimedean monoid, the following hold for positive $x, a, b$:
	\begin{itemize}
		\item $\gcd \text{ is commutative}$
		\item $\gcd \text{ is associative}$ 
		\item $x \text{ divides } a \wedge x \text{ divides } b \Rightarrow x \leq \gcd(a, b)$
		\item $\gcd(a, b) \text{ is unique}$
		\item $\gcd(a, a) = a$
		\item $a > b \Rightarrow \gcd(a, b) = \gcd(a - b, b)$
	\end{itemize}
\end{lemma}

\begin{lemma}
	It always terminates for integers and rationals.
\end{lemma}

\begin{proof}
	At each step of the algorithm we decrease one of the two values and by the well ordering principle
	on integers and rationals we can't keep getting smaller positive values forever, therefore the
	algorithm must terminate at some point.
\end{proof}

\begin{lemma}
	$\gcd(\frac{a}{\gcd(a, b)}, \frac{b}{\gcd(a, b)}) = 1$
\end{lemma}

\begin{proof}
	Let $d = \gcd(a, b)$, then $a = nd$ and $b = md$ where $\gcd(n, m) = 1$ since $d$ contains
	all the common factors of $a$ and $b$.
	\begin{align*}
		\gcd(\frac{a}{\gcd(a, b)}, \frac{b}{\gcd(a, b)})
		&= \gcd(\frac{nd}{d}, \frac{md}{d})\\
		&= \gcd(n, m)\\
		&= 1
	\end{align*}
\end{proof}

\begin{lemma}
	If the square of an integer $n$ is even, $n$ is even.
\end{lemma}

\begin{proof}
	Let $n = 2x$, then $n^2 = 4x^2 = 2(2x^2)$ which is even.
\end{proof}

\begin{lemma}
	Every Archimedean monoid with a smallest positive element is Euclidean.
\end{lemma}

\begin{proof}
	Since \verb|subtractive_gcd_nonzero| decreases one of the values at each
	step of the algorithm, if there is a smallest positive element then the
	algorithm will eventually reach it and the algorithm is guaranteed to
	terminate.
\end{proof}
